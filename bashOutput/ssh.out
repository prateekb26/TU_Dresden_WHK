

### ssh connection reuse

To be able to reuse a ssh connection, you must configure ssh appropriately. You should set *ControlMaster* to *auto* and you have to specify a control path via option *ControlPath*. You can define a generic path like *~/.ssh/ssh_mux_%h_%p_%r* - this can be the same for all hosts. For example, for some host *alice* you might add the following lines to *$HOME/.ssh/config*:


## Container Configuration

To simplify the *ssh* setup inside of containers, you might want to map your *ssh* configuration residing in your home directory into the containers in which you run the **scone** CLI. Since you probably have a different user ID inside and outside the container, you might want to copy the original *ssh* configuration:


Inside the container, copy the external *ssh* configuration:



### SSH Agent

In the container running the *scone* CLI, you need to start a *ssh-agent* in the container in which you run the *scone* CLI:


and add your public key by executing:


Ensure that you are now able to log into all hosts of your swarm.


## SGX Host Setup

**scone** expects to have password-less access to all SGX hosts that you want to use for Scone. To do so, you need to add one of your public ssh keys to **~/.ssh/authorized_keys** on all SGX host. For example, you could add your public key *~/.ssh/id_rsa.pub* to file  *~/.ssh/authorized_keys* on each of these hosts.

Some commands are required to be executed with **sudo**.  We assume that the user has the right to perform a password-less **sudo** on the SGX hosts. In case the user does not yet have this right, the user should be added to **/etc/sudoers**. Typically, one would add the user with the help of command **visudo**. The entry for user *alice* might look like this:



## SSH Credentials

In case you do not want to use your standard credentials inside of a container, you need to ensure that you have a pair of authentication keys inside the container. If there exists no public key *$HOME/.ssh/id_rsa.pub* (often the case if you use a container), you can generate a new pair by executing:


Append the generated public key *$HOME/.ssh/id_rsa.pub* to file *$HOME/.ssh/authorized_keys* on the SGX hosts for which you to be able to log in without a password.

Also, ensure that your *$HOME/.ssh/config* contains an entry for each host of your swarm (see above).


&copy; [scontain.com](http://www.scontain.com), March 2018. [Questions or Suggestions?](mailto:info@scontain.com)